<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>领域驱动设计（Domain-driven Design） | bytesgo</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/bytesgo.png">
    <script src="/js/demo.js"></script>
    <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="

领域专家和开发人员共同工作，这样软件可以准确表达业务规则，就像是领域专家开发出来的一样
帮助业务人员自我提高
知识集中，确保软件知识并不只是掌握在少数人手中
领域专家、开发者和软件间不需要“翻译”，彼此使用通用语言交流
设计就是代码，代码就是设计
DDD同时提供战略设计和战术设计。战略设计帮助理解必要的投入、团队人员构成；战术设计帮助创建DDD中的各个组件。

通 ...">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.6b52fa6d.css" as="style"><link rel="preload" href="/assets/js/app.67395b07.js" as="script"><link rel="preload" href="/assets/js/6.96e5990b.js" as="script"><link rel="preload" href="/assets/js/3.3ea5a04d.js" as="script"><link rel="preload" href="/assets/js/20.346f8d70.js" as="script"><link rel="prefetch" href="/assets/js/10.0134150b.js"><link rel="prefetch" href="/assets/js/11.48b3911c.js"><link rel="prefetch" href="/assets/js/12.cd72e563.js"><link rel="prefetch" href="/assets/js/13.a42d1696.js"><link rel="prefetch" href="/assets/js/14.b2d3372d.js"><link rel="prefetch" href="/assets/js/15.51591a33.js"><link rel="prefetch" href="/assets/js/16.2197cb68.js"><link rel="prefetch" href="/assets/js/17.0af2ee5a.js"><link rel="prefetch" href="/assets/js/18.01e2265a.js"><link rel="prefetch" href="/assets/js/19.30ac87d6.js"><link rel="prefetch" href="/assets/js/21.396aa789.js"><link rel="prefetch" href="/assets/js/22.a63f34a8.js"><link rel="prefetch" href="/assets/js/23.c58f022e.js"><link rel="prefetch" href="/assets/js/24.32cdcd81.js"><link rel="prefetch" href="/assets/js/25.3071bae9.js"><link rel="prefetch" href="/assets/js/26.b4b74b83.js"><link rel="prefetch" href="/assets/js/27.57b6b1f6.js"><link rel="prefetch" href="/assets/js/28.dc882647.js"><link rel="prefetch" href="/assets/js/29.44ac83b0.js"><link rel="prefetch" href="/assets/js/30.044c1c73.js"><link rel="prefetch" href="/assets/js/4.79df9b5b.js"><link rel="prefetch" href="/assets/js/5.d8e8df5b.js"><link rel="prefetch" href="/assets/js/7.c569497f.js"><link rel="prefetch" href="/assets/js/8.353bf241.js"><link rel="prefetch" href="/assets/js/9.19e903e3.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.0cbd6f70.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6b52fa6d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">bytesgo </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">首页</a></li><li class="nav-item"><a href="/blog/" class="nav-link">博客</a></li><li class="nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="nav-item"><a href="https://github.com/bytesgo" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">bytesgo </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">首页</a></li><li class="mobile-nav-item"><a href="/blog/" class="nav-link">博客</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="mobile-nav-item"><a href="https://github.com/bytesgo" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        领域驱动设计（Domain-driven Design）
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">leeyazhou</span> <!----></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-09-01T00:00:00.000Z">
      2020年09月
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/DDD" data-v-42ccfcd5><span data-v-42ccfcd5>DDD</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/领域驱动设计" data-v-42ccfcd5><span data-v-42ccfcd5>领域驱动设计</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/flower" data-v-42ccfcd5><span data-v-42ccfcd5>flower</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/Doamin-driven Design" data-v-42ccfcd5><span data-v-42ccfcd5>Doamin-driven Design</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="领域驱动设计优势"><a href="#领域驱动设计优势" class="header-anchor">#</a> 领域驱动设计优势</h2> <ul><li>领域专家和开发人员共同工作，这样软件可以准确表达业务规则，就像是领域专家开发出来的一样</li> <li>帮助业务人员自我提高</li> <li>知识集中，确保软件知识并不只是掌握在少数人手中</li> <li>领域专家、开发者和软件间不需要“翻译”，彼此使用通用语言交流</li> <li>设计就是代码，代码就是设计</li> <li>DDD同时提供战略设计和战术设计。战略设计帮助理解必要的投入、团队人员构成；战术设计帮助创建DDD中的各个组件。</li></ul> <h2 id="通用语言-ubiquitous-language"><a href="#通用语言-ubiquitous-language" class="header-anchor">#</a> 通用语言(Ubiquitous Language)</h2> <p>领域模型和软件设计是紧密联系在一起的，软件系统的各个方面的设计都要忠实的反映领域模型，以便明确二者的对应关系。而且需要经常反复检查修改模型，以便更优雅的实现模型。
那么，领域专家、设计人员和开发人员就要有一套交流的专业术语，可以称之为Ubiquitous Language</p> <p><img src="/img/ddd-ubiquitous-language.png" alt="通用语言"></p> <h2 id="领域驱动设计概念"><a href="#领域驱动设计概念" class="header-anchor">#</a> 领域驱动设计概念</h2> <ul><li>实体(Entity/Reference Object）</li> <li>值对象(Value object)</li> <li>聚合(Aggregate)和聚合根(Aggregate Root)</li> <li>领域服务(Domain Service)</li> <li>领域事件(Domain Event)</li> <li>仓储(Repository)</li></ul> <h3 id="实体-entity-reference-object"><a href="#实体-entity-reference-object" class="header-anchor">#</a> 实体(Entity/Reference Object)</h3> <p>领域中具有生命周期的对象，通常会经历创建、更新和销毁的过程。它的显著特点是拥有一个全局唯一标识符，而且唯一标识符是区分两个实体是否相等的唯一条件。</p> <h3 id="值对象-value-object"><a href="#值对象-value-object" class="header-anchor">#</a> 值对象(Value object)</h3> <p>领域中当只关心领域模型的属性时，应把它归类为值对象。 而且值对象应该是不可变的，和实体对比来看，值对象不需要分配唯一标识符。两个对象只要内部属性都相等，就可以认为是同一个对象。</p> <h3 id="聚合聚合根-aggregate-和聚合根-aggregate-root"><a href="#聚合聚合根-aggregate-和聚合根-aggregate-root" class="header-anchor">#</a> 聚合聚合根(Aggregate)和聚合根(Aggregate Root)</h3> <ul><li>聚合定义了一组具有内聚关系的相关对象的集合，是一个修改数据的单元，通过聚合定义出对象间的关系和边界。</li> <li>如果一个聚合只包含一个实体，那么这个实体可以认为是一个聚合根。</li></ul> <h3 id="领域服务-domain-service"><a href="#领域服务-domain-service" class="header-anchor">#</a> 领域服务(Domain Service)</h3> <ul><li>领域设计中，有些重要的操作不适合归类到Entity或Value Object的，可以设计到Service中，本质上是一些活动或者行为动作。</li> <li>软件设计中，Service可以划分为三种类型：应用层服务、领域层服务和基础设施服务</li></ul> <h3 id="领域事件-domain-event"><a href="#领域事件-domain-event" class="header-anchor">#</a> 领域事件(Domain Event)</h3> <p>聚合对象接收命令(Command)请求和查询(Query)请求时，可能需要生成领域事件对象给领域对象。在CQRS模式的应用中，领域事件通常是由命令请求产生的。</p> <h3 id="仓储-repository"><a href="#仓储-repository" class="header-anchor">#</a> 仓储(Repository)</h3> <p>实体对象需要存储，可以存储在内存(In Memory)或者磁盘(Database)上，在需要实体对象时再从仓储中重构出实体对象。在实践中，数据库存储是仓储的一种实现方式。</p> <h2 id="领域驱动模式"><a href="#领域驱动模式" class="header-anchor">#</a> 领域驱动模式</h2> <ul><li>分层架构(Layers Architecture)</li> <li>六边形理论(Hexagonal Architecture)</li> <li>洋葱架构/简洁架构(Onion Architecture/The clean Architecture)</li> <li>命令查询职责分离(Command-Query Responsibility Segregation)</li> <li>事件溯源(Event Source)</li></ul> <h3 id="分层架构-layers-architecture"><a href="#分层架构-layers-architecture" class="header-anchor">#</a> 分层架构(Layers Architecture)</h3> <p><img src="/img/ddd-layer-architecture.png" alt="分层架构"></p> <h3 id="六边形架构-端口适配器架构-hexagonal-architecture"><a href="#六边形架构-端口适配器架构-hexagonal-architecture" class="header-anchor">#</a> 六边形架构/端口适配器架构(Hexagonal Architecture)</h3> <p><img src="/img/ddd-hexagonal-architecture.png" alt="六边形架构/端口适配器架构"></p> <h3 id="洋葱架构-简洁架构-onion-architecture-the-clean-architecture"><a href="#洋葱架构-简洁架构-onion-architecture-the-clean-architecture" class="header-anchor">#</a> 洋葱架构/简洁架构(Onion Architecture/The clean Architecture)</h3> <p><img src="/img/ddd-onion-architecture.png" alt="洋葱架构/简洁架构"></p> <h3 id="命令查询职责分离-command-query-responsibility-segregation"><a href="#命令查询职责分离-command-query-responsibility-segregation" class="header-anchor">#</a> 命令查询职责分离(Command-Query Responsibility Segregation)</h3> <p><img src="/img/ddd-cqrs-architecture.png" alt="命令查询职责分离"></p> <h3 id="事件溯源-event-source"><a href="#事件溯源-event-source" class="header-anchor">#</a> 事件溯源(Event Source)</h3> <p>事件溯源是一种数据存储的模式，区别于传统仓储存储实体对象的当前状态，事件溯源则存储了影响实体对象变化的所有事件，通过事件历史回溯实体的当前状态。</p> <p><img src="/img/ddd-es-architecture.png" alt="事件溯源"></p> <h2 id="flower-domain-driven-design"><a href="#flower-domain-driven-design" class="header-anchor">#</a> Flower Domain Driven Design</h2> <h3 id="flower-ddd的设计思路"><a href="#flower-ddd的设计思路" class="header-anchor">#</a> Flower DDD的设计思路</h3> <ul><li>Flower基于akka，是一个反应式微服务框架，原生支持消息驱动模式。</li> <li>Actor模型是消息驱动、非阻塞的，优雅解决多线程难题，提高系统吞吐量</li> <li>定义CommandHandler和EventHandler，处理Command和Query</li> <li>编排CommandGateway流程和QueryGateway流程，代理Command和Query的操作入口</li> <li>基于Flower异步特性，异步响应</li></ul> <p>Flower CQRS架构图
<img src="/img/ddd-flower-cqrs-architecture.png" alt="命令查询职责分离"></p> <h3 id="command"><a href="#command" class="header-anchor">#</a> Command</h3> <ul><li>CommandGateway</li> <li>CommandHandler</li> <li>EventHandler</li></ul> <h4 id="commandgateway"><a href="#commandgateway" class="header-anchor">#</a> CommandGateway</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@Autowired</span>
  <span class="token class-name">CommandGateway</span> commandGateway<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/create&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createFoodCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ui create food cart</span>
    <span class="token comment">// publish an commannd : CreateOrderCommand</span>
    commandGateway<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CreateOrderCommand</span><span class="token punctuation">(</span>index<span class="token punctuation">.</span><span class="token function">incrementAndGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;foodcart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="commandhandler"><a href="#commandhandler" class="header-anchor">#</a> CommandHandler</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@CommandHandler</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">command</span><span class="token punctuation">(</span><span class="token class-name">CreateOrderCommand</span> command<span class="token punctuation">,</span> <span class="token class-name">ServiceContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;创建订单命令：{}&quot;</span><span class="token punctuation">,</span> command<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">AggregateLifecycle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CreateOrderEvent</span><span class="token punctuation">(</span>command<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> command<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="eventhandler"><a href="#eventhandler" class="header-anchor">#</a> EventHandler</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@EventHandler</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token class-name">CreateOrderEvent</span> event<span class="token punctuation">,</span> <span class="token class-name">ServiceContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;处理订单事件：{}&quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">getWeb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">printJSON</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// dao</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="query"><a href="#query" class="header-anchor">#</a> Query</h3> <h3 id="querygateway"><a href="#querygateway" class="header-anchor">#</a> QueryGateway</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@Autowired</span>
  <span class="token class-name">QueryGateway</span> queryGateway<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;{orderId}&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryFoodcart</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    queryGateway<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SelectOrderCommand</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="queryhandler"><a href="#queryhandler" class="header-anchor">#</a> QueryHandler</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@CommandHandler</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">command</span><span class="token punctuation">(</span><span class="token class-name">SelectOrderCommand</span> command<span class="token punctuation">,</span> <span class="token class-name">ServiceContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;选择订单命令：{}&quot;</span><span class="token punctuation">,</span> command<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">AggregateLifecycle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SelectOrderEvent</span><span class="token punctuation">(</span>command<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="eventhandler-2"><a href="#eventhandler-2" class="header-anchor">#</a> EventHandler</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@EventHandler</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token class-name">SelectOrderEvent</span> event<span class="token punctuation">,</span> <span class="token class-name">ServiceContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;选择订单事件：{}&quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// do something</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="flower请求响应"><a href="#flower请求响应" class="header-anchor">#</a> Flower请求响应</h3> <p>ServiceContext中持有请求上下文对象HttpServletRequest，通过ServiceContext可以对客户端响应数据。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@EventHandler</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token class-name">CreateOrderEvent</span> event<span class="token punctuation">,</span> <span class="token class-name">ServiceContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;处理订单事件：{}&quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">getWeb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">printJSON</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// dao</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="集成spring-boot"><a href="#集成spring-boot" class="header-anchor">#</a> 集成spring-boot</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@FlowerComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.ly.train.flower.ddd&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DDDApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DDDApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#领域驱动设计优势" title="领域驱动设计优势">领域驱动设计优势</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#通用语言-ubiquitous-language" title="通用语言(Ubiquitous Language)">通用语言(Ubiquitous Language)</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#领域驱动设计概念" title="领域驱动设计概念">领域驱动设计概念</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#实体-entity-reference-object" title="实体(Entity/Reference Object)">实体(Entity/Reference Object)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#值对象-value-object" title="值对象(Value object)">值对象(Value object)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#聚合聚合根-aggregate-和聚合根-aggregate-root" title="聚合聚合根(Aggregate)和聚合根(Aggregate Root)">聚合聚合根(Aggregate)和聚合根(Aggregate Root)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#领域服务-domain-service" title="领域服务(Domain Service)">领域服务(Domain Service)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#领域事件-domain-event" title="领域事件(Domain Event)">领域事件(Domain Event)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#仓储-repository" title="仓储(Repository)">仓储(Repository)</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#领域驱动模式" title="领域驱动模式">领域驱动模式</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#分层架构-layers-architecture" title="分层架构(Layers Architecture)">分层架构(Layers Architecture)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#六边形架构-端口适配器架构-hexagonal-architecture" title="六边形架构/端口适配器架构(Hexagonal Architecture)">六边形架构/端口适配器架构(Hexagonal Architecture)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#洋葱架构-简洁架构-onion-architecture-the-clean-architecture" title="洋葱架构/简洁架构(Onion Architecture/The clean Architecture)">洋葱架构/简洁架构(Onion Architecture/The clean Architecture)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#命令查询职责分离-command-query-responsibility-segregation" title="命令查询职责分离(Command-Query Responsibility Segregation)">命令查询职责分离(Command-Query Responsibility Segregation)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#事件溯源-event-source" title="事件溯源(Event Source)">事件溯源(Event Source)</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#flower-domain-driven-design" title="Flower Domain Driven Design">Flower Domain Driven Design</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#flower-ddd的设计思路" title="Flower DDD的设计思路">Flower DDD的设计思路</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#command" title="Command">Command</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#query" title="Query">Query</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#querygateway" title="QueryGateway">QueryGateway</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#queryhandler" title="QueryHandler">QueryHandler</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#eventhandler-2" title="EventHandler">EventHandler</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#flower请求响应" title="Flower请求响应">Flower请求响应</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#集成spring-boot" title="集成spring-boot">集成spring-boot</a></div></div></div></div> <footer class="footer" data-v-4a27c186><div class="footer-left-wrap" data-v-4a27c186><ul class="contact" data-v-4a27c186><li class="contact-item" data-v-4a27c186><a href="https://github.com/bytesgo" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-4a27c186><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-4a27c186><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-4a27c186></path></svg>
          
        </a></li><li class="contact-item" data-v-4a27c186><a href="https://twitter.com/bytesgo" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-4a27c186><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-4a27c186><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-4a27c186></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-4a27c186><ul class="copyright" data-v-4a27c186><li class="copyright-item" data-v-4a27c186><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-4a27c186>Privacy Policy</a></li><li class="copyright-item" data-v-4a27c186><a href="https://github.com/bytesgo" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-4a27c186>MIT Licensed | Copyright © 2020-2021 bytesgo.com</a></li></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.67395b07.js" defer></script><script src="/assets/js/6.96e5990b.js" defer></script><script src="/assets/js/3.3ea5a04d.js" defer></script><script src="/assets/js/20.346f8d70.js" defer></script>
  </body>
</html>
