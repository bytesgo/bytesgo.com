(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{480:function(s,a,t){"use strict";t.r(a);var e=t(8),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"缘起"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缘起"}},[s._v("#")]),s._v(" 缘起")]),s._v(" "),t("p",[s._v("最近公司业务涉及到抓包的工作内容，所以要研究抓包的工作内容，由于对数据抓取的内容研究不多，所以在摸索中慢慢研究。由于在研究的过程中，需要经常请教一位对安全研究比较多的同事，而且正好他有一台闲置的手机（lg nexus 5），就送给我了（感谢感谢同事的大力支持）。")]),s._v(" "),t("p",[s._v("那么，现在最新的android系统已经升级到了android 11，为什么要研究这么老的版本的系统呢？主要有两方面的考虑：")]),s._v(" "),t("ul",[t("li",[s._v("android 6以上的版本对抓包管理比较严格")]),s._v(" "),t("li",[s._v("lg nexus 5官方支持的最高版本是android 6，且nexus 5硬件配置比较低")])]),s._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[s._v("网上关于android源码开发的文章有很多，为什么要我这个门外汉来写一篇文章来贻笑大方呢？")]),s._v(" "),t("p",[s._v("这也是综合考虑的结果：")]),s._v(" "),t("ul",[t("li",[s._v("网上教程虽多，大多是android 6比较流行时的教程，系统硬件迭代很快，在现在android 10版本比较流行的时候，很少有人像我这么傻的去编译android 6.0")]),s._v(" "),t("li",[s._v("虽然教程比较多，但是我在尝试编译的过程中还是遇到了很多的问题，另一方面是用这篇文章来记录一下学习的过程")])]),s._v(" "),t("h2",{attrs:{id:"源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码"}},[s._v("#")]),s._v(" 源码")]),s._v(" "),t("p",[s._v("android管理源码是基于一个叫做repo的工具实现的，当然最终还是基于git管理源码的。源码部分包含两部分内容：")]),s._v(" "),t("ul",[t("li",[s._v("管理工具repo配置")]),s._v(" "),t("li",[s._v("源码下载")])]),s._v(" "),t("h3",{attrs:{id:"配置repo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置repo"}},[s._v("#")]),s._v(" 配置repo")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" ~/bin\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" https://storage.googleapis.com/git-repo-downloads/repo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ~/bin/repo\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" a+x ~/bin/repo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/bin/repo\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改REPO_URL地址为清华源")]),s._v("\nREPO_URL "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://mirrors.tuna.tsinghua.edu.cn/git/git-repo'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 'https://gerrit.googlesource.com/git-repo'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"源码下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码下载"}},[s._v("#")]),s._v(" 源码下载")]),s._v(" "),t("p",[s._v("初始化仓库：")]),s._v(" "),t("p",[s._v("参数 "),t("em",[s._v("--depth=1")]),s._v(" 表示只同步当前分支最后一次提交的代码，可以提高下载的速度")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("repo init -u https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/platform/manifest -b android-6.0.1_r77 --depth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("同步源码树（以后只需执行这条命令来同步）：")]),s._v(" "),t("p",[s._v("参数 "),t("em",[s._v("-c")]),s._v(" 表示只同步当前分支的代码，不会拉去其他的分支的源数据，可以提高下载的速度")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("repo "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" -c\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);